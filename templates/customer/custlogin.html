{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title> Customer Login - Affordable Local, Outstation, & Airport Taxi Services | RidexpressTaxi Services </title>

    <meta name="description"
        content=" Book local, outstation, and airport taxis with RidexpressTaxi Services. Enjoy 24/7 service, affordable rates, and safe rides for all your travel needs. Professional drivers ensure a comfortable and reliable journey, whether you're commuting within the city, traveling long-distance, or catching a flight." />

    <meta name="keywords"
        content="local taxi service, outstation taxi, airport taxi, cab service, taxi booking, affordable cab, reliable taxi service, 24/7 taxi, city commute, outstation cab, long-distance taxi, one-way taxi, airport transfer, taxi near me, cab for airport, Bengaluru taxi service, safe taxi service, Ridexpress" />

    <link rel="icon" type="image/png" sizes="16x16" href="{% static '/img/logo/favicon.png' %}">
    <link href="{% static '/dashboard/css/style.css' %}" rel="stylesheet">
    <style>
        .modal#statusSuccessModal .modal-content,
        .modal#statusErrorsModal .modal-content {
            border-radius: 30px;
        }

        .modal#statusSuccessModal .modal-content svg,
        .modal#statusErrorsModal .modal-content svg {
            width: 100px;
            display: block;
            margin: 0 auto;
        }

        .modal#statusSuccessModal .modal-content .path,
        .modal#statusErrorsModal .modal-content .path {
            stroke-dasharray: 1000;
            stroke-dashoffset: 0;
        }

        .modal#statusSuccessModal .modal-content .path.circle,
        .modal#statusErrorsModal .modal-content .path.circle {
            -webkit-animation: dash 0.9s ease-in-out;
            animation: dash 0.9s ease-in-out;
        }

        .modal#statusSuccessModal .modal-content .path.line,
        .modal#statusErrorsModal .modal-content .path.line {
            stroke-dashoffset: 1000;
            -webkit-animation: dash 0.95s 0.35s ease-in-out forwards;
            animation: dash 0.95s 0.35s ease-in-out forwards;
        }

        .modal#statusSuccessModal .modal-content .path.check,
        .modal#statusErrorsModal .modal-content .path.check {
            stroke-dashoffset: -100;
            -webkit-animation: dash-check 0.95s 0.35s ease-in-out forwards;
            animation: dash-check 0.95s 0.35s ease-in-out forwards;
        }

        @-webkit-keyframes dash {
            0% {
                stroke-dashoffset: 1000;
            }

            100% {
                stroke-dashoffset: 0;
            }
        }

        @keyframes dash {
            0% {
                stroke-dashoffset: 1000;
            }

            100% {
                stroke-dashoffset: 0;
            }
        }

        @-webkit-keyframes dash {
            0% {
                stroke-dashoffset: 1000;
            }

            100% {
                stroke-dashoffset: 0;
            }
        }

        @keyframes dash {
            0% {
                stroke-dashoffset: 1000;
            }

            100% {
                stroke-dashoffset: 0;
            }
        }

        @-webkit-keyframes dash-check {
            0% {
                stroke-dashoffset: -100;
            }

            100% {
                stroke-dashoffset: 900;
            }
        }

        @keyframes dash-check {
            0% {
                stroke-dashoffset: -100;
            }

            100% {
                stroke-dashoffset: 900;
            }
        }

        .box00 {
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }
    </style>
</head>


<body class="h-100">
    <div class="authincation h-100" style="background-image: url('/static/img/service/custlogin.avif'); 
    background-size: cover; background-position: center; background-repeat: no-repeat;">
        <div class="container-fluid h-100">
            <div class="row justify-content-center h-100 align-items-center">
                <div class="col-md-6">
                    <div class="authincation-content">
                        <div class="row no-gutters">
                            <div class="col-xl-12">
                                <div class="auth-form">
                                    <center> <img src="/static/img/logo/ridexpress.png" style="width: 50%;"></center>
                                    <br>
                                    <h2 class="text-center mb-4">Sign in your account</h2>
                                    <div class="form-group">
                                        <label><strong>Phone Number</strong></label>
                                        <input type="text" class="form-control form-control-lg" id="phone_number"
                                            name="phone_number">
                                    </div>
                                    <div class="form-row d-flex justify-content-between mt-4 mb-2">
                                        <div class="form-group">
                                            <a href="#">Forgot Password?</a>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <button type="button" class="btn btn-primary btn-block" id="login_action"
                                            style="">Sign me in</button>
                                    </div>
                                    <div class="new-account mt-3">
                                        <center>
                                            <p>Don't have an account? <a class="text-primary"
                                                    href="{% url 'regcustomer' %}"> Sign up</a></p>
                                        </center>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Structure -->
    <div class="modal fade" id="statusErrorsModal" tabindex="-1" role="dialog" data-bs-backdrop="static"
        data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-body text-center p-lg-4">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                        <circle class="path circle" fill="none" stroke="#db3646" stroke-width="6" stroke-miterlimit="10"
                            cx="65.1" cy="65.1" r="62.1" />
                        <line class="path line" fill="none" stroke="#db3646" stroke-width="6" stroke-linecap="round"
                            stroke-miterlimit="10" x1="34.4" y1="37.9" x2="95.8" y2="92.3" />
                        <line class="path line" fill="none" stroke="#db3646" stroke-width="6" stroke-linecap="round"
                            stroke-miterlimit="10" x1="95.8" y1="38" x2="34.4" y2="92.2" />
                    </svg>
                    <h4 class="text-danger mt-3">Invalid!!</h4>
                    <p class="mt-3">Phone number not found. Please register.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="statusSuccessModal" tabindex="-1" role="dialog" data-bs-backdrop="static"
        data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-body text-center p-lg-4">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                        <circle class="path circle" fill="none" stroke="#198754" stroke-width="6" stroke-miterlimit="10"
                            cx="65.1" cy="65.1" r="62.1" />
                        <polyline class="path check" fill="none" stroke="#198754" stroke-width="6"
                            stroke-linecap="round" stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 " />
                    </svg>
                    <h4 class="text-success mt-3">Oh Yeah!</h4>
                    <p class="mt-3">You have successfully logged in.</p>
                </div>
            </div>
        </div>
    </div>



    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script src="{% static '/dashboard/vendor/global/global.min.js' %}"></script>
    <script src="{% static '/dashboard/js/quixnav-init.js' %}"></script>
    <script src="{% static '/dashboard/js/custom.min.js' %}"></script>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        $("#login_action").click(function (event) {
            event.preventDefault(); // Prevent default form submission
            var phone_number = $('#phone_number').val();

            $.ajax({
                url: "{% url 'custlogin' %}",
                type: "POST",
                data: {
                    phone_number: phone_number,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (response) {
                    if (response.success) {
                        var myModal = new bootstrap.Modal(document.getElementById('statusSuccessModal'));
                        myModal.show();
                        window.location.href = response.redirect_url;
                    } else {
                        // alert(response.message); // Display registration message

                        var myModal = new bootstrap.Modal(document.getElementById('statusErrorsModal'));
                        myModal.show();
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText); // Log the server response for debugging
                    alert("An error occurred while processing your request."); // Display a generic error message
                }
            });
        });
    });
</script>

</html>